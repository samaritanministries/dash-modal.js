!function(a){"use strict";window.namespace=function(a){for(var b,c=window,d=a.split(".");b=d.shift();)c[b]=c[b]||{},c=c[b]}}(window._),this.DashModalJST=this.DashModalJST||{},this.DashModalJST["scripts/dash-modal/template.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape}with(obj)__p+='<div class="dash-overlay" data-id="dash-overlay">\n  <div data-id="modal" class="dash-modal '+(null==(__t=modalSize)?"":__t)+' fade">\n    <span data-id="close" class="modal-close">&times;</span>\n    <div data-id="modal-flash-container"></div>\n    <div data-id="view-container" tabindex="1"></div>\n  </div>\n</div>\n';return __p},function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};namespace("DashModal"),DashModal.EscapeKeyUp=function(){function b(){this.handleKeyup=a(this.handleKeyup,this)}return b.ESCAPE_KEY_CODE=27,b.prototype.respondWith=function(a){return this.callback=a,$(document).bind("keyup",this.handleKeyup)},b.prototype.removeListeners=function(){return $(document).unbind("keyup",this.handleKeyup)},b.prototype.handleKeyup=function(a){return a.keyCode===DashModal.EscapeKeyUp.ESCAPE_KEY_CODE?this.callback():void 0},b}()}.call(this),function(){namespace("DashModal"),DashModal.NullEscapeKeyUp=function(){function a(){}return a.prototype.respondWith=function(){},a.prototype.removeListeners=function(){},a}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;namespace("DashModal"),DashModal.View=function(c){function d(){return this.hide=a(this.hide,this),d.__super__.constructor.apply(this,arguments)}return b(d,c),d.prototype.template=DashModalJST["scripts/dash-modal/template.ejs"],d.prototype.initialize=function(a){var b;return this.options=a,this.view=this.options.view,this.escapeKeyUp=this.buildEscapeKeyUp(),this.container=null!=(b=this.options.container)?b:$("[data-id=modal-container]")},d.prototype.events={"click [data-id=modal]":"stopPropagation","click [data-id=dash-overlay]":"outerCountainerClick","click [data-id=close]":"hide"},d.prototype.stopPropagation=function(a){return a.stopPropagation()},d.prototype.outerCountainerClick=function(){return this.options.shouldCloseOnOverlay?this.hide():void 0},d.prototype.show=function(){return this.escapeKeyUp.respondWith(this.hide),this.$el.html(this.template({modalSize:this.options.modalSize})),this.options.hasXButton||this.removeCloseButton(),this.listenTo(this.view,"hideModal",this.hide),this.$("[data-id=view-container]").html(this.modalHtml()),$("body").addClass("prevent-scrolling"),this.$("[data-id=modal]").addClass("in"),this.container.html(this.el),this.$("[data-id=view-container]").focus(),this.$el.show(function(a){return function(){return a.view.trigger("showModalComplete")}}(this)),this},d.prototype.hide=function(){var a;return this.escapeKeyUp.removeListeners(),"function"==typeof(a=this.options).onCloseCallback&&a.onCloseCallback(),this.$("[data-id=modal]").removeClass("in"),this.$el.hide(),$("body").removeClass("prevent-scrolling")},d.prototype.isVisible=function(){return"prevent-scrolling"===$("body").attr("class")},d.prototype.modalHtml=function(){return this.view.$el.is(":empty")?this.view.render().$el:this.view.$el},d.prototype.removeCloseButton=function(){return this.$("[data-id=close]").remove()},d.prototype.buildEscapeKeyUp=function(){return this.options.shouldCloseOnEscape?new DashModal.EscapeKeyUp:new DashModal.NullEscapeKeyUp},d}(Backbone.View)}.call(this);